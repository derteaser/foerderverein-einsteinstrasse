let p,Z,i,o,m,w,L,v,E,S,X,z,x,tt,b,k,O,D,B,V,_,K;const W=[];let G,F,C,U,N,P,a,c,M,A={},q,g;const d="appendChild",u="createElement",y="removeChild";var ct=t=>(Z||ot(),x&&(clearTimeout(tt),Q()),g=t,z=t.ytSrc||t.vimeoSrc,F=t.animationStart,C=t.animationEnd,U=t.onChangeImage,p=t.el,G=!1,D=p.getAttribute("data-caption"),t.gallery?at(t.gallery,t.position):z||t.iframeSrc?(o=v,lt()):t.imgSrc?(G=!0,S=t.imgSrc,!~W.indexOf(S)&&H(!0),o=m,o.src=S):t.audio?(H(!0),o=L,o.src=t.audio,j("audio file")):t.vidSrc?(H(!0),t.dimensions&&f(w,`width:${t.dimensions[0]}px`),rt(t.vidSrc),j("video")):(o=m,o.src=p.tagName==="IMG"?p.src:window.getComputedStyle(p).backgroundImage.replace(/^url|[(|)|'|"]/g,"")),i[d](o),document.body[d](i),{close:J,next:()=>$(1),prev:()=>$(-1)});function ot(){let t;function e(n){const l=document[u]("button");return l.className=n,l.innerHTML='<svg viewBox="0 0 48 48"><path d="M28 24L47 5a3 3 0 1 0-4-4L24 20 5 1a3 3 0 1 0-4 4l19 19L1 43a3 3 0 1 0 4 4l19-19 19 19a3 3 0 0 0 4 0v-4L28 24z"/></svg>',l}function r(n,l){const h=document[u]("button");return h.className="bp-lr",h.innerHTML='<svg viewBox="0 0 129 129" height="70" fill="#fff"><path d="M88.6 121.3c.8.8 1.8 1.2 2.9 1.2s2.1-.4 2.9-1.2a4.1 4.1 0 0 0 0-5.8l-51-51 51-51a4.1 4.1 0 0 0-5.8-5.8l-54 53.9a4.1 4.1 0 0 0 0 5.8l54 53.9z"/></svg>',f(h,l),h.onclick=T=>{T.stopPropagation(),$(n)},h}const s=document[u]("STYLE");s.innerHTML="#bp_caption,#bp_container{bottom:0;left:0;right:0;position:fixed;opacity:0}#bp_container>*,#bp_loader{position:absolute;right:0;z-index:10}#bp_container,#bp_caption,#bp_container svg{pointer-events:none}#bp_container{top:0;z-index:9999;background:rgba(0,0,0,.7);opacity:0;transition:opacity .35s}#bp_loader{top:0;left:0;bottom:0;display:flex;align-items:center;cursor:wait;background:0;z-index:9}#bp_loader svg{width:50%;max-width:300px;max-height:50%;margin:auto;animation:bpturn 1s infinite linear}#bp_aud,#bp_container img,#bp_sv,#bp_vid{user-select:none;max-height:96%;max-width:96%;top:0;bottom:0;left:0;margin:auto;box-shadow:0 0 3em rgba(0,0,0,.4);z-index:-1}#bp_sv{background:#111}#bp_sv svg{width:66px}#bp_caption{font-size:.9em;padding:1.3em;background:rgba(15,15,15,.94);color:#fff;text-align:center;transition:opacity .3s}#bp_aud{width:650px;top:calc(50% - 20px);bottom:auto;box-shadow:none}#bp_count{left:0;right:auto;padding:14px;color:rgba(255,255,255,.7);font-size:22px;cursor:default}#bp_container button{position:absolute;border:0;outline:0;background:0;cursor:pointer;transition:all .1s}#bp_container>.bp-x{padding:0;height:41px;width:41px;border-radius:100%;top:8px;right:14px;opacity:.8;line-height:1}#bp_container>.bp-x:focus,#bp_container>.bp-x:hover{background:rgba(255,255,255,.2)}.bp-x svg,.bp-xc svg{height:21px;width:20px;fill:#fff;vertical-align:top;}.bp-xc svg{width:16px}#bp_container .bp-xc{left:2%;bottom:100%;padding:9px 20px 7px;background:#d04444;border-radius:2px 2px 0 0;opacity:.85}#bp_container .bp-xc:focus,#bp_container .bp-xc:hover{opacity:1}.bp-lr{top:50%;top:calc(50% - 130px);padding:99px 0;width:6%;background:0;border:0;opacity:.4;transition:opacity .1s}.bp-lr:focus,.bp-lr:hover{opacity:.8}@keyframes bpf{50%{transform:translatex(15px)}100%{transform:none}}@keyframes bpl{50%{transform:translatex(-15px)}100%{transform:none}}@keyframes bpfl{0%{opacity:0;transform:translatex(70px)}100%{opacity:1;transform:none}}@keyframes bpfr{0%{opacity:0;transform:translatex(-70px)}100%{opacity:1;transform:none}}@keyframes bpfol{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(-70px)}}@keyframes bpfor{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(70px)}}@keyframes bpturn{0%{transform:none}100%{transform:rotate(360deg)}}@media (max-width:600px){.bp-lr{font-size:15vw}}",document.head[d](s),i=document[u]("DIV"),i.id="bp_container",i.onclick=J,X=e("bp-x"),i[d](X),"ontouchstart"in window&&(q=!0,i.ontouchstart=({changedTouches:n})=>{t=n[0].pageX},i.ontouchmove=n=>{n.preventDefault()},i.ontouchend=({changedTouches:n})=>{if(!_)return;const l=n[0].pageX-t;l<-30&&$(1),l>30&&$(-1)}),m=document[u]("IMG"),w=document[u]("VIDEO"),w.id="bp_vid",w.setAttribute("playsinline",!0),w.controls=!0,w.loop=!0,L=document[u]("audio"),L.id="bp_aud",L.controls=!0,L.loop=!0,M=document[u]("span"),M.id="bp_count",k=document[u]("DIV"),k.id="bp_caption",B=e("bp-xc"),B.onclick=R.bind(null,!1),k[d](B),O=document[u]("SPAN"),k[d](O),i[d](k),N=r(1,"transform:scalex(-1)"),P=r(-1,"left:0;right:auto"),b=document[u]("DIV"),b.id="bp_loader",b.innerHTML='<svg viewbox="0 0 32 32" fill="#fff" opacity=".8"><path d="M16 0a16 16 0 0 0 0 32 16 16 0 0 0 0-32m0 4a12 12 0 0 1 0 24 12 12 0 0 1 0-24" fill="#000" opacity=".5"/><path d="M16 0a16 16 0 0 1 16 16h-4A12 12 0 0 0 16 4z"/></svg>',v=document[u]("DIV"),v.id="bp_sv",E=document[u]("IFRAME"),E.setAttribute("allowfullscreen",!0),E.allow="autoplay; fullscreen",E.onload=()=>v[y](b),f(E,"border:0;position:absolute;height:100%;width:100%;left:0;top:0"),v[d](E),m.onload=I,m.onerror=I.bind(null,"image"),window.addEventListener("resize",()=>{_||x&&H(!0),o===v&&nt()}),document.addEventListener("keyup",({keyCode:n})=>{n===27&&V&&J(),_&&(n===39&&$(1),n===37&&$(-1),n===38&&$(10),n===40&&$(-10))}),document.addEventListener("keydown",n=>{_&&~[37,38,39,40].indexOf(n.keyCode)&&n.preventDefault()}),document.addEventListener("focus",n=>{V&&!i.contains(n.target)&&(n.stopPropagation(),X.focus())},!0),Z=!0}function et(){const{top:t,left:e,width:r,height:s}=p.getBoundingClientRect(),n=e-(i.clientWidth-r)/2,l=t-(i.clientHeight-s)/2,h=p.clientWidth/o.clientWidth,T=p.clientHeight/o.clientHeight;return`transform:translate3D(${n}px, ${l}px, 0) scale3D(${h}, ${T}, 0)`}function rt(t){Array.isArray(t)?(o=w.cloneNode(),t.forEach(e=>{const r=document[u]("SOURCE");r.src=e,r.type=`video/${e.match(/.(\w+)$/)[1]}`,o[d](r)})):(o=w,o.src=t)}function at(t,e){let r=g.galleryAttribute||"data-bp";if(Array.isArray(t))a=e||0,c=t,D=t[a].caption;else{c=[].slice.call(typeof t=="string"?document.querySelectorAll(`${t} [${r}]`):t);const s=c.indexOf(p);a=e===0||e?e:s!==-1?s:0,c=c.map(n=>({el:n,src:n.getAttribute(r),caption:n.getAttribute("data-caption")}))}G=!0,S=c[a].src,!~W.indexOf(S)&&H(!0),c.length>1?(i[d](M),M.innerHTML=`${a+1}/${c.length}`,q||(i[d](N),i[d](P))):c=!1,o=m,o.src=S}function $(t){const e=c.length-1;if(x)return;if(t>0&&a===e||t<0&&!a){if(!g.loop){f(m,""),setTimeout(f,9,m,`animation:${t>0?"bpl":"bpf"} .3s;transition:transform .35s`);return}a=t>0?-1:e+1}if(a=Math.max(0,Math.min(a+t,e)),[a-1,a,a+1].forEach(s=>{if(s=Math.max(0,Math.min(s,e)),A[s])return;const n=c[s].src,l=document[u]("IMG");l.addEventListener("load",it.bind(null,n)),l.src=n,A[s]=l}),A[a].complete)return Y(t);x=!0,f(b,"opacity:.4;"),i[d](b),A[a].onload=()=>{_&&Y(t)},A[a].onerror=()=>{c[a]={error:"Error loading image"},_&&Y(t)}}function Y(t){x&&(i[y](b),x=!1);const e=c[a];if(e.error)alert(e.error);else{const r=i.querySelector("img:last-of-type");m=o=A[a],f(m,`animation:${t>0?"bpfl":"bpfr"} .35s;transition:transform .35s`),f(r,`animation:${t>0?"bpfol":"bpfor"} .35s both`),i[d](m),e.el&&(p=e.el)}M.innerHTML=`${a+1}/${c.length}`,R(c[a].caption),U&&U([m,c[a]])}function lt(){let t;const e="https://",r="autoplay=1";g.ytSrc?t=`${e}www.youtube${g.ytNoCookie?"-nocookie":""}.com/embed/${z}?html5=1&rel=0&playsinline=1&${r}`:g.vimeoSrc?t=`${e}player.vimeo.com/video/${z}?${r}`:g.iframeSrc&&(t=g.iframeSrc),f(b,""),v[d](b),E.src=t,nt(),setTimeout(I,9)}function nt(){let t,e;const r=window.innerHeight*.95,s=window.innerWidth*.95,n=r/s,[l,h]=g.dimensions||[1920,1080],T=h/l;T>n?(t=Math.min(h,r),e=t/T):(e=Math.min(l,s),t=e*T),v.style.cssText+=`width:${e}px;height:${t}px;`}function j(t){~[1,4].indexOf(o.readyState)?(I(),setTimeout(()=>{o.play()},99)):o.error?I(t):tt=setTimeout(j,35,t)}function H(t){g.noLoader||(t&&f(b,`top:${p.offsetTop}px;left:${p.offsetLeft}px;height:${p.clientHeight}px;width:${p.clientWidth}px`),p.parentElement[t?d:y](b),x=t)}function R(t){t&&(O.innerHTML=t),f(k,`opacity:${t?"1;pointer-events:auto":"0"}`)}function it(t){!~W.indexOf(t)&&W.push(t)}function I(t){if(x&&H(),F&&F(),typeof t=="string")return Q(),g.onError?g.onError():alert(`Error: The requested ${t} could not be loaded.`);G&&it(S),o.style.cssText+=et(),f(i,"opacity:1;pointer-events:auto"),C&&(C=setTimeout(C,410)),V=!0,_=!!c,setTimeout(()=>{o.style.cssText+="transition:transform .35s;transform:none",D&&setTimeout(R,250,D)},60)}function J(t){const e=t?t.target:i,r=[k,B,w,L,O,P,N,b];e.blur(),!(K||~r.indexOf(e))&&(o.style.cssText+=et(),f(i,"pointer-events:auto"),setTimeout(Q,350),clearTimeout(C),V=!1,K=!0)}function Q(){if((o===v?E:o).removeAttribute("src"),document.body[y](i),i[y](o),f(i,""),f(o,""),R(!1),_){const e=i.querySelectorAll("img");for(let r=0;r<e.length;r++)i[y](e[r]);x&&i[y](b),i[y](M),_=c=!1,A={},q||i[y](N),q||i[y](P),m.onload=I,m.onerror=I.bind(null,"image")}g.onClose&&g.onClose(),K=x=!1}function f({style:t},e){t.cssText=e}export{ct as B};
