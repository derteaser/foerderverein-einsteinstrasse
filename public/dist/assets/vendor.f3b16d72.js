let u,tt,n,i,g,_,L,$,T,A,X,O,w,et,h,S,V,B,z,D,E,F;const W=[];let G,U,C,Y,P,q,a,l,H,k={},N,f;const d="appendChild",p="createElement",y="removeChild";var st=t=>(tt||rt(),w&&(clearTimeout(et),Z()),f=t,O=t.ytSrc||t.vimeoSrc,U=t.animationStart,C=t.animationEnd,Y=t.onChangeImage,u=t.el,G=!1,B=u.getAttribute("data-caption"),t.gallery?lt(t.gallery,t.position):O||t.iframeSrc?(i=$,ct()):t.imgSrc?(G=!0,A=t.imgSrc,!~W.indexOf(A)&&M(!0),i=g,i.src=A):t.audio?(M(!0),i=L,i.src=t.audio,j("audio file")):t.vidSrc?(M(!0),t.dimensions&&m(_,`width:${t.dimensions[0]}px`),at(t.vidSrc),j("video")):(i=g,i.src=u.tagName==="IMG"?u.src:window.getComputedStyle(u).backgroundImage.replace(/^url|[(|)|'|"]/g,"")),n[d](i),document.body[d](n),{close:J,opts:f,updateDimensions:Q,display:i,next:()=>v(1),prev:()=>v(-1)});function rt(){let t,e;function r(o){const s=document[p]("button");return s.className=o,s.innerHTML='<svg viewBox="0 0 48 48"><path d="M28 24L47 5a3 3 0 1 0-4-4L24 20 5 1a3 3 0 1 0-4 4l19 19L1 43a3 3 0 1 0 4 4l19-19 19 19a3 3 0 0 0 4 0v-4L28 24z"/></svg>',s}function c(o,s){const x=document[p]("button");return x.className="bp-lr",x.innerHTML='<svg viewBox="0 0 129 129" height="70" fill="#fff"><path d="M88.6 121.3c.8.8 1.8 1.2 2.9 1.2s2.1-.4 2.9-1.2a4.1 4.1 0 0 0 0-5.8l-51-51 51-51a4.1 4.1 0 0 0-5.8-5.8l-54 53.9a4.1 4.1 0 0 0 0 5.8l54 53.9z"/></svg>',m(x,s),x.onclick=ot=>{ot.stopPropagation(),v(o)},x}const b=document[p]("STYLE");b.innerHTML="#bp_caption,#bp_container{bottom:0;left:0;right:0;position:fixed;opacity:0}#bp_container>*,#bp_loader{position:absolute;right:0;z-index:10}#bp_container,#bp_caption,#bp_container svg{pointer-events:none}#bp_container{top:0;z-index:9999;background:rgba(0,0,0,.7);opacity:0;transition:opacity .35s}#bp_loader{top:0;left:0;bottom:0;display:flex;align-items:center;cursor:wait;background:0;z-index:9}#bp_loader svg{width:50%;max-width:300px;max-height:50%;margin:auto;animation:bpturn 1s infinite linear}#bp_aud,#bp_container img,#bp_sv,#bp_vid{user-select:none;max-height:96%;max-width:96%;top:0;bottom:0;left:0;margin:auto;box-shadow:0 0 3em rgba(0,0,0,.4);z-index:-1}#bp_sv{background:#111}#bp_sv svg{width:66px}#bp_caption{font-size:.9em;padding:1.3em;background:rgba(15,15,15,.94);color:#fff;text-align:center;transition:opacity .3s}#bp_aud{width:650px;top:calc(50% - 20px);bottom:auto;box-shadow:none}#bp_count{left:0;right:auto;padding:14px;color:rgba(255,255,255,.7);font-size:22px;cursor:default}#bp_container button{position:absolute;border:0;outline:0;background:0;cursor:pointer;transition:all .1s}#bp_container>.bp-x{padding:0;height:41px;width:41px;border-radius:100%;top:8px;right:14px;opacity:.8;line-height:1}#bp_container>.bp-x:focus,#bp_container>.bp-x:hover{background:rgba(255,255,255,.2)}.bp-x svg,.bp-xc svg{height:21px;width:20px;fill:#fff;vertical-align:top;}.bp-xc svg{width:16px}#bp_container .bp-xc{left:2%;bottom:100%;padding:9px 20px 7px;background:#d04444;border-radius:2px 2px 0 0;opacity:.85}#bp_container .bp-xc:focus,#bp_container .bp-xc:hover{opacity:1}.bp-lr{top:50%;top:calc(50% - 130px);padding:99px 0;width:6%;background:0;border:0;opacity:.4;transition:opacity .1s}.bp-lr:focus,.bp-lr:hover{opacity:.8}@keyframes bpf{50%{transform:translatex(15px)}100%{transform:none}}@keyframes bpl{50%{transform:translatex(-15px)}100%{transform:none}}@keyframes bpfl{0%{opacity:0;transform:translatex(70px)}100%{opacity:1;transform:none}}@keyframes bpfr{0%{opacity:0;transform:translatex(-70px)}100%{opacity:1;transform:none}}@keyframes bpfol{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(-70px)}}@keyframes bpfor{0%{opacity:1;transform:none}100%{opacity:0;transform:translatex(70px)}}@keyframes bpturn{0%{transform:none}100%{transform:rotate(360deg)}}@media (max-width:600px){.bp-lr{font-size:15vw}}",document.head[d](b),n=document[p]("DIV"),n.id="bp_container",n.onclick=J,X=r("bp-x"),n[d](X),"ontouchend"in window&&window.visualViewport&&(N=!0,n.ontouchstart=({touches:o,changedTouches:s})=>{e=o.length>1,t=s[0].pageX},n.ontouchend=({changedTouches:o})=>{if(E&&!e&&window.visualViewport.scale<=1){let s=o[0].pageX-t;s<-30&&v(1),s>30&&v(-1)}}),g=document[p]("IMG"),_=document[p]("VIDEO"),_.id="bp_vid",_.setAttribute("playsinline",!0),_.controls=!0,_.loop=!0,L=document[p]("audio"),L.id="bp_aud",L.controls=!0,L.loop=!0,H=document[p]("span"),H.id="bp_count",S=document[p]("DIV"),S.id="bp_caption",z=r("bp-xc"),z.onclick=R.bind(null,!1),S[d](z),V=document[p]("SPAN"),S[d](V),n[d](S),P=c(1,"transform:scalex(-1)"),q=c(-1,"left:0;right:auto"),h=document[p]("DIV"),h.id="bp_loader",h.innerHTML='<svg viewbox="0 0 32 32" fill="#fff" opacity=".8"><path d="M16 0a16 16 0 0 0 0 32 16 16 0 0 0 0-32m0 4a12 12 0 0 1 0 24 12 12 0 0 1 0-24" fill="#000" opacity=".5"/><path d="M16 0a16 16 0 0 1 16 16h-4A12 12 0 0 0 16 4z"/></svg>',$=document[p]("DIV"),$.id="bp_sv",T=document[p]("IFRAME"),T.setAttribute("allowfullscreen",!0),T.allow="autoplay; fullscreen",T.onload=()=>$[y](h),m(T,"border:0;position:absolute;height:100%;width:100%;left:0;top:0"),$[d](T),g.onload=I,g.onerror=I.bind(null,"image"),window.addEventListener("resize",()=>{E||w&&M(!0),i===$&&Q()}),document.addEventListener("keyup",({keyCode:o})=>{o===27&&D&&J(),E&&(o===39&&v(1),o===37&&v(-1),o===38&&v(10),o===40&&v(-10))}),document.addEventListener("keydown",o=>{E&&~[37,38,39,40].indexOf(o.keyCode)&&o.preventDefault()}),document.addEventListener("focus",o=>{D&&!n.contains(o.target)&&(o.stopPropagation(),X.focus())},!0),tt=!0}function nt(){const{top:t,left:e,width:r,height:c}=u.getBoundingClientRect(),b=e-(n.clientWidth-r)/2,o=t-(n.clientHeight-c)/2,s=u.clientWidth/i.clientWidth,x=u.clientHeight/i.clientHeight;return`transform:translate3D(${b}px, ${o}px, 0) scale3D(${s}, ${x}, 0)`}function at(t){Array.isArray(t)?(i=_.cloneNode(),t.forEach(e=>{const r=document[p]("SOURCE");r.src=e,r.type=`video/${e.match(/.(\w+)$/)[1]}`,i[d](r)})):(i=_,i.src=t)}function lt(t,e){let r=f.galleryAttribute||"data-bp";if(Array.isArray(t))a=e||0,l=t,B=t[a].caption;else{l=[].slice.call(typeof t=="string"?document.querySelectorAll(`${t} [${r}]`):t);const c=l.indexOf(u);a=e===0||e?e:c!==-1?c:0,l=l.map(b=>({el:b,src:b.getAttribute(r),caption:b.getAttribute("data-caption")}))}G=!0,A=l[a].src,!~W.indexOf(A)&&M(!0),l.length>1?(n[d](H),H.innerHTML=`${a+1}/${l.length}`,N||(n[d](P),n[d](q))):l=!1,i=g,i.src=A}function v(t){const e=l.length-1;if(w)return;if(t>0&&a===e||t<0&&!a){if(!f.loop){m(g,""),setTimeout(m,9,g,`animation:${t>0?"bpl":"bpf"} .3s;transition:transform .35s`);return}a=t>0?-1:e+1}if(a=Math.max(0,Math.min(a+t,e)),[a-1,a,a+1].forEach(c=>{if(c=Math.max(0,Math.min(c,e)),k[c])return;const b=l[c].src,o=document[p]("IMG");o.addEventListener("load",it.bind(null,b)),o.src=b,k[c]=o}),k[a].complete)return K(t);w=!0,m(h,"opacity:.4;"),n[d](h),k[a].onload=()=>{E&&K(t)},k[a].onerror=()=>{l[a]={error:"Error loading image"},E&&K(t)}}function K(t){w&&(n[y](h),w=!1);const e=l[a];if(e.error)alert(e.error);else{const r=n.querySelector("img:last-of-type");g=i=k[a],m(g,`animation:${t>0?"bpfl":"bpfr"} .35s;transition:transform .35s`),m(r,`animation:${t>0?"bpfol":"bpfor"} .35s both`),n[d](g),e.el&&(u=e.el)}H.innerHTML=`${a+1}/${l.length}`,R(l[a].caption),Y&&Y([g,l[a]])}function ct(){let t;const e="https://",r="autoplay=1";f.ytSrc?t=`${e}www.youtube${f.ytNoCookie?"-nocookie":""}.com/embed/${O}?html5=1&rel=0&playsinline=1&${r}`:f.vimeoSrc?t=`${e}player.vimeo.com/video/${O}?${r}`:f.iframeSrc&&(t=f.iframeSrc),m(h,""),$[d](h),T.src=t,Q(),setTimeout(I,9)}function Q(){let t,e;const r=window.innerHeight*.95,c=window.innerWidth*.95,b=r/c,[o,s]=f.dimensions||[1920,1080],x=s/o;x>b?(t=Math.min(s,r),e=t/x):(e=Math.min(o,c),t=e*x),$.style.cssText+=`width:${e}px;height:${t}px;`}function j(t){~[1,4].indexOf(i.readyState)?(I(),setTimeout(()=>{i.play()},99)):i.error?I(t):et=setTimeout(j,35,t)}function M(t){f.noLoader||(t&&m(h,`top:${u.offsetTop}px;left:${u.offsetLeft}px;height:${u.clientHeight}px;width:${u.clientWidth}px`),u.parentElement[t?d:y](h),w=t)}function R(t){t&&(V.innerHTML=t),m(S,`opacity:${t?"1;pointer-events:auto":"0"}`)}function it(t){!~W.indexOf(t)&&W.push(t)}function I(t){if(w&&M(),U&&U(),typeof t=="string")return Z(),f.onError?f.onError():alert(`Error: The requested ${t} could not be loaded.`);G&&it(A),i.style.cssText+=nt(),m(n,"opacity:1;pointer-events:auto"),C&&(C=setTimeout(C,410)),D=!0,E=!!l,setTimeout(()=>{i.style.cssText+="transition:transform .35s;transform:none",B&&setTimeout(R,250,B)},60)}function J(t){const e=t?t.target:n,r=[S,z,_,L,V,q,P,h];e.blur(),!(F||~r.indexOf(e))&&(i.style.cssText+=nt(),m(n,"pointer-events:auto"),setTimeout(Z,350),clearTimeout(C),D=!1,F=!0)}function Z(){if((i===$?T:i).removeAttribute("src"),document.body[y](n),n[y](i),m(n,""),m(i,""),R(!1),E){const e=n.querySelectorAll("img");for(let r=0;r<e.length;r++)n[y](e[r]);w&&n[y](h),n[y](H),E=l=!1,k={},N||n[y](P),N||n[y](q),g.onload=I,g.onerror=I.bind(null,"image")}f.onClose&&f.onClose(),F=w=!1}function m({style:t},e){t.cssText=e}export{st as B};
